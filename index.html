<!DOCTYPE html>
<html lang="en">
  <!-- HEAD -->
  <head>
    <!-- page information -->
		<meta charset="UTF-8">
		<title>DJ | KB Overlay</title>
		<meta name="description" content="A customisable pressure sensitive display for your Wooting keyboard!">
    <link rel="shortcut icon" type="image/png" href="woootcon.ico"/>
		<meta name="viewport" content="width=device-width">
    <meta name="theme-color" content="#131313">
    
		<!-- css stylesheets -->
		<link rel='stylesheet' type='text/css' href="styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  </head>

  <!-- BODY -->
  <body>
    <!-- keyboard and keys display -->
    <section id="keyboard"></section>

    <!-- popup to add more keys to screen -->
    <section id="keyPool" class="tabmenu">
      <input type="search" id="keyPoolInput" placeholder="Search" oninput="buildOptions()" >
      <div id="keyPoolOptions"></div>
    </section>

    <!-- optional logging information -->
    <div id = "optionalInfo">
      <h1 id="values">Start pressing!</h1>
      <hr>
      <h2 id="output"></h2>
    </div>

    <!-- floating toolbar -->
    <div id="toolbar" class="mouseOver">
      <!-- settings popup menu -->
      <div id="settings" class="tabmenu">
        <div>Active:
        <input type="color" id="activeColorPicker"></div>
        <div>Inactive:
        <input type="color" id="inactiveColorPicker"></div>
        <div>Accent:
        <input type="color" id="accentColorPicker">

        <hr>
        
        <div>Tick if colour inputs don't work.
          <input type="checkbox" id="inputCheckbox">
        </div>
        <div>Rounding:
          <input type="checkbox" id="roundingCheckbox"></div>
        <div>Instant transitions:
          <input type="checkbox" id="transitionCheckbox"></div>
        </div>
      </div>

      <div id="presets"  class="tabmenu">
        <p>Presets</p>
        <textarea id="presetInput" placeholder="Paste preset here"></textarea>
        <button onclick="loadState()">Save</button>
        <button onclick="copyToClipboard()">Copy to clipboard</button>
      </div>

      <div id="lanSettings" class="tabmenu">
        <p>Connect to external client.</p>
        <p>Press connect and wait ~3 seconds.</p>
        <input type="text" id="lanInput" placeholder="192.168.x.x">
        <button onclick="connectToExternalLan()">Connect</button>
      </div>

      <!-- icons -->
      <i class="material-symbols-outlined" onclick="toggleVisiblity('keyPool')">add_circle<span class="infoField">Add keys</span></i>
      <i class="material-symbols-outlined" onclick="toggleVisiblity('settings')">settings<span class="infoField">Customise</span></i>
      <i class="material-symbols-outlined" onclick="toggleVisiblity('presets')">bookmarks<span class="infoField">Presets</span></i>
      <i class="material-symbols-outlined" onclick="toggleVisiblity('lanSettings')">magic_tether<span class="infoField">LAN connection</span></i>
      <i class="material-symbols-outlined" onclick="toggleVisiblity('optionalInfo')">visibility<span class="infoField">Toggle info</span></i>
    </div>

    <!-- Key option dialog -->
    <div id="keyOptionDialog">
      <p>Rename:
        <input type="text" id="keyLabel" placeholder="New name" style="width: 100%" onkeydown="if(event.keyCode === 13) updateKeyLabel(this)">
</p>
      </p>
      <p>Fill dir.</p>
      <table class="directions">
        <tr>
          <td id="topLeft" onclick=updateKeySettings(this.id)>🡦</td>
          <td id="top" onclick=updateKeySettings(this.id)>🡣</td>
          <td id="topRight" onclick=updateKeySettings(this.id)>🡧</td>
        </tr>
        <tr>
          <td id="left" onclick=updateKeySettings(this.id)>🡢</td>
          <td id="centre" onclick=updateKeySettings(this.id)>⤫</td>
          <td id="right" onclick=updateKeySettings(this.id)>🡠</td>
        </tr>
        <tr>
          <td id="bottomLeft" onclick=updateKeySettings(this.id)>🡥</td>
          <td id="bottom" onclick=updateKeySettings(this.id)>🡡</td>
          <td id="bottomRight" onclick=updateKeySettings(this.id)>🡤</td>
        </tr>
      </table>
      <table class="directions">
        <tr>
          <td id="vertical" onclick=updateKeySettings(this.id)>⥊</td>
          <td id="horizontal" onclick=updateKeySettings(this.id)>⥍</td>
        </tr>
      </table>

      <span class="deleteButton" onclick=removeKey()>Remove</span>
    </div>
  </body>


<!-- SCRIPTING -->
  <!-- mouse event based script -->
  <script type="text/javascript" src="js/mousehandlers.js"></script>

  <!-- key pool script -->
  <script type="text/javascript" src="js/keypool.js"></script>

  <!-- key menu and key customisation -->
  <script type="text/javascript" src="js/keymenu.js"></script>

  <!-- keyboard related scripts -->
  <script type="text/javascript" src="js/keyboard.js"></script>

  <!-- websockets related scripts -->
  <script type="text/javascript" src="js/websocket.js"></script>
   
  <!-- toolbar settings related scripts -->
  <script type="text/javascript" src="js/toolbarfunctions.js"></script>
</html>
